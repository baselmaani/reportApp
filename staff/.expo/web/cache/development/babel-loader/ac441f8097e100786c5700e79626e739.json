{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport React, { Component, useState } from 'react';\nimport MapView from 'react-native-maps';\nimport Map from \"./Map\";\nimport { useNearByReports } from \"../../hooks/useNearByReports\";\nimport ReportListItem from \"./ReportListItem\";\nimport { useCurrentLocation } from \"../../hooks/useCurrentLocation\";\nimport { Feather } from '@expo/vector-icons';\nimport { Button, IconButton, Modal, Portal, Provider } from 'react-native-paper';\nimport AddReportForm from \"./AddReportForm\";\nimport Layout from \"../../shared/layout/Layout\";\nimport ReportDetails from \"./ReportDetails\";\nimport LoadingView from \"../../shared/loading/LoadingView\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar Home = function Home(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      displayAdd = _useState2[0],\n      setDisplayAdd = _useState2[1];\n\n  var _useCurrentLocation = useCurrentLocation(),\n      currentLocation = _useCurrentLocation.currentLocation,\n      initRegion = _useCurrentLocation.initRegion;\n\n  var _useNearByReports = useNearByReports(),\n      data = _useNearByReports.data,\n      isLoading = _useNearByReports.isLoading,\n      isError = _useNearByReports.isError;\n\n  var onSelectReport = function onSelectReport(report) {\n    navigation.navigate('reportDetails', {\n      reportId: report.id\n    });\n  };\n\n  if (isLoading) return _jsx(LoadingView, {});\n  console.log(initRegion);\n  return _jsx(Layout, {\n    children: _jsxs(Provider, {\n      children: [_jsx(Portal, {\n        children: _jsx(Modal, {\n          contentContainerStyle: styles.addNewModal,\n          visible: displayAdd,\n          onDismiss: function onDismiss() {\n            return setDisplayAdd(false);\n          },\n          children: _jsx(AddReportForm, {\n            onCancel: function onCancel() {\n              return setDisplayAdd(false);\n            }\n          })\n        })\n      }), _jsxs(View, {\n        style: styles.container,\n        children: [_jsx(View, {\n          style: styles.mapContainer,\n          children: _jsx(Map, {\n            locations: data,\n            initRegion: initRegion == null ? void 0 : initRegion.coords,\n            onPressMarker: function onPressMarker(c) {\n              return onSelectReport(c);\n            }\n          })\n        }), _jsxs(View, {\n          style: styles.reportsItemsSection,\n          children: [_jsx(FlatList, {\n            keyExtractor: function keyExtractor(item) {\n              return item.id;\n            },\n            showsHorizontalScrollIndicator: false,\n            horizontal: true,\n            data: data,\n            renderItem: function renderItem(_ref2) {\n              var item = _ref2.item;\n              return _jsx(ReportListItem, {\n                item: item,\n                horizontal: true,\n                currentLocation: currentLocation,\n                onPress: function onPress() {\n                  return onSelectReport(item);\n                }\n              }, item.id);\n            }\n          }), _jsx(Button, {\n            style: styles.btn,\n            onPress: function onPress() {\n              return navigation.navigate('reports');\n            },\n            children: \"Visa alla\"\n          })]\n        })]\n      })]\n    })\n  });\n};\n\nexport default Home;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    width: '100%'\n  },\n  mapContainer: {\n    height: '70%'\n  },\n  plusContainer: {\n    position: 'absolute',\n    top: -30,\n    justifyContent: 'center',\n    alignItems: 'center',\n    width: '100%'\n  },\n  plus: {\n    padding: 10,\n    backgroundColor: '#4CAF50',\n    borderRadius: 40\n  },\n  addNewModal: {\n    backgroundColor: '#fff',\n    padding: 10\n  },\n  reportsItemsSection: {\n    paddingTop: 40,\n    justifyContent: 'space-between'\n  },\n  btn: {\n    padding: 10\n  },\n  closeButton: {\n    backgroundColor: '#fff'\n  }\n});","map":{"version":3,"sources":["/Users/almaani/Documents/GitHub/reportsApp/staff/src/pages/home/Home.js"],"names":["React","Component","useState","MapView","Map","useNearByReports","ReportListItem","useCurrentLocation","Feather","Button","IconButton","Modal","Portal","Provider","AddReportForm","Layout","ReportDetails","LoadingView","Home","navigation","displayAdd","setDisplayAdd","currentLocation","initRegion","data","isLoading","isError","onSelectReport","report","navigate","reportId","id","console","log","styles","addNewModal","container","mapContainer","coords","c","reportsItemsSection","item","btn","StyleSheet","create","flex","width","height","plusContainer","position","top","justifyContent","alignItems","plus","padding","backgroundColor","borderRadius","paddingTop","closeButton"],"mappings":"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","sourcesContent":["import {\n  Text,\n  StyleSheet,\n  View,\n  FlatList,\n  TouchableOpacity,\n} from 'react-native';\nimport React, { Component, useState } from 'react';\nimport MapView from 'react-native-maps';\nimport Map from './Map';\nimport { useNearByReports } from '../../hooks/useNearByReports';\nimport ReportListItem from './ReportListItem';\nimport { useCurrentLocation } from '../../hooks/useCurrentLocation';\nimport { Feather } from '@expo/vector-icons';\nimport {\n  Button,\n  IconButton,\n  Modal,\n  Portal,\n  Provider,\n} from 'react-native-paper';\nimport AddReportForm from './AddReportForm';\nimport Layout from '../../shared/layout/Layout';\nimport ReportDetails from './ReportDetails';\nimport LoadingView from '../../shared/loading/LoadingView';\n\nconst Home = ({ navigation }) => {\n  const [displayAdd, setDisplayAdd] = useState(false);\n\n  const { currentLocation, initRegion } = useCurrentLocation();\n\n  const { data, isLoading, isError } = useNearByReports();\n\n  const onSelectReport = (report) => {\n    navigation.navigate('reportDetails', {\n      reportId: report.id,\n    });\n  };\n\n  if (isLoading) return <LoadingView />;\n\n  console.log(initRegion);\n  return (\n    <Layout>\n      <Provider>\n        <Portal>\n          <Modal\n            contentContainerStyle={styles.addNewModal}\n            visible={displayAdd}\n            onDismiss={() => setDisplayAdd(false)}\n          >\n            <AddReportForm onCancel={() => setDisplayAdd(false)} />\n          </Modal>\n        </Portal>\n        <View style={styles.container}>\n          <View style={styles.mapContainer}>\n            <Map\n              locations={data}\n              initRegion={initRegion?.coords}\n              onPressMarker={(c) => onSelectReport(c)}\n            />\n          </View>\n          <View style={styles.reportsItemsSection}>\n            <FlatList\n              keyExtractor={(item) => item.id}\n              showsHorizontalScrollIndicator={false}\n              horizontal={true}\n              data={data}\n              renderItem={({ item }) => (\n                <ReportListItem\n                  key={item.id}\n                  item={item}\n                  horizontal={true}\n                  currentLocation={currentLocation}\n                  onPress={() => onSelectReport(item)}\n                />\n              )}\n            />\n            <Button\n              style={styles.btn}\n              onPress={() => navigation.navigate('reports')}\n            >\n              Visa alla\n            </Button>\n          </View>\n        </View>\n      </Provider>\n    </Layout>\n  );\n};\n\nexport default Home;\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    width: '100%',\n  },\n  mapContainer: {\n    height: '70%',\n  },\n  plusContainer: {\n    position: 'absolute',\n    top: -30,\n    justifyContent: 'center',\n    alignItems: 'center',\n    width: '100%',\n  },\n  plus: {\n    padding: 10,\n    backgroundColor: '#4CAF50',\n    borderRadius: 40,\n  },\n  addNewModal: {\n    backgroundColor: '#fff',\n    padding: 10,\n  },\n  reportsItemsSection: {\n    paddingTop: 40,\n    justifyContent: 'space-between',\n  },\n  btn: {\n    padding: 10,\n  },\n  closeButton: {\n    backgroundColor: '#fff',\n  },\n});\n"]},"metadata":{},"sourceType":"module"}