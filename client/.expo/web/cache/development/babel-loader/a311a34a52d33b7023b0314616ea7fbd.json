{"ast":null,"code":"import _objectDestructuringEmpty from \"@babel/runtime/helpers/objectDestructuringEmpty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { useMutation } from 'react-query';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { useStateValue } from \"../providers/StateContext\";\nimport jwtDecode from 'jwt-decode';\nimport Auth from \"../api/Auth\";\nexport var useLogin = function useLogin() {\n  var _useStateValue = useStateValue(),\n      _useStateValue2 = _slicedToArray(_useStateValue, 2);\n\n  _objectDestructuringEmpty(_useStateValue2[0]);\n\n  var changeState = _useStateValue2[1];\n  return useMutation(Auth.login, {\n    onSuccess: function onSuccess(dt) {\n      var decoded;\n      return _regeneratorRuntime.async(function onSuccess$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(AsyncStorage.setItem('token', dt.token));\n\n            case 2:\n              decoded = jwtDecode(dt.token);\n              changeState({\n                type: 'SET_USER',\n                payload: decoded\n              });\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n  });\n};","map":{"version":3,"sources":["C:/Users/Basel/Downloads/reportsApp-master/reportsApp-master/client/src/hooks/useLogin.js"],"names":["useMutation","AsyncStorage","useStateValue","jwtDecode","Auth","useLogin","changeState","login","onSuccess","dt","setItem","token","decoded","type","payload"],"mappings":";;;AAAA,SAASA,WAAT,QAA4B,aAA5B;AACA,OAAOC,YAAP,MAAyB,2CAAzB;AACA,SAASC,aAAT;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,IAAP;AAEA,OAAO,IAAMC,QAAQ,GAAG,SAAXA,QAAW,GAAM;AAC5B,uBAA0BH,aAAa,EAAvC;AAAA;;AAAA;;AAAA,MAAWI,WAAX;AACA,SAAON,WAAW,CAACI,IAAI,CAACG,KAAN,EAAa;AAC7BC,IAAAA,SAAS,EAAE,mBAAOC,EAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CACHR,YAAY,CAACS,OAAb,CAAqB,OAArB,EAA8BD,EAAE,CAACE,KAAjC,CADG;;AAAA;AAEHC,cAAAA,OAFG,GAEOT,SAAS,CAACM,EAAE,CAACE,KAAJ,CAFhB;AAITL,cAAAA,WAAW,CAAC;AACVO,gBAAAA,IAAI,EAAE,UADI;AAEVC,gBAAAA,OAAO,EAAEF;AAFC,eAAD,CAAX;;AAJS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADkB,GAAb,CAAlB;AAWD,CAbM","sourcesContent":["import { useMutation } from 'react-query';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { useStateValue } from '../providers/StateContext';\nimport jwtDecode from 'jwt-decode';\nimport Auth from '../api/Auth';\n\nexport const useLogin = () => {\n  const [{}, changeState] = useStateValue();\n  return useMutation(Auth.login, {\n    onSuccess: async (dt) => {\n      await AsyncStorage.setItem('token', dt.token);\n      const decoded = jwtDecode(dt.token);\n\n      changeState({\n        type: 'SET_USER',\n        payload: decoded,\n      });\n    },\n  });\n};\n"]},"metadata":{},"sourceType":"module"}